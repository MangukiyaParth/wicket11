<IfModule mod_php5.c>
    php_flag session.auto_start 1
</IfModule>

<Files .env>
    Order allow,deny
    Deny from all
</Files>

RewriteEngine On

# Skip static files from rewrite rules
RewriteCond %{REQUEST_URI} \.(css|js|png|jpg|jpeg|gif|ico|woff|woff2|ttf|svg|eot|webp)$ [NC]
RewriteRule ^ - [L]  # Stop processing if matched

# Force HTTPS (excluding localhost/192.x.x.x)
RewriteCond %{HTTP_HOST} !^localhost [NC]
RewriteCond %{HTTP_HOST} !^192\. [NC]
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Rewrite rules for PHP routes
RewriteRule ^login/?$ login.php [L]
RewriteRule ^logout/?$ logout.php [L]
RewriteRule ^page/([^/]+)/?$ manage.php?id=$1 [NC,L]